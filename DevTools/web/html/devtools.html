 <!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
	 <style>
		[v-cloak] {
			display: none;
		}
	 </style>  
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body>
<div id="app" style="display:normal;" v-cloak>

	<!-- http://www.w3schools.com/bootstrap/bootstrap_case_navigation.asp -->
	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>                       
	      </button>
	      <a class="navbar-brand" @click="setCurrentLink('About')" href="#">DevTools</a>
	    </div>
	    <div class="collapse navbar-collapse" id="myNavbar">
	      <ul class="nav navbar-nav">
	        <li v-bind:class="{active : isCurrentLink('About')}">
	        	<a @click="setCurrentLink('About')" href="#">About</a>
	        </li>	      
	        <li v-bind:class="{active : isCurrentLink('Base64')}">
	        	<a @click="setCurrentLink('Base64')" href="#" >Base64 Encode/Decode</a>
	        </li>
	        <li v-bind:class="{active : isCurrentLink('UrlEncode')}">
	        	<a @click="setCurrentLink('UrlEncode')" href="#">URL Encode/Decode</a>
	        </li>
	        <li v-bind:class="{active : isCurrentLink('ESQuery')}">
	        	<a @click="setCurrentLink('ESQuery')" href="#">Convert SQL queries to ElasticSearch queries.</a>
	        </li>	        
	      </ul>    
	    </div>
	  </div>
	</nav>
	
<!-- Bootstrap requires a containing element to wrap elements http://www.w3schools.com/bootstrap/bootstrap_get_started.asp -->
 
	<form accept-charset="UTF-8">
	<div class="container-fluid">
		<div v-if="currentLink == 'About'" id="about"> 
			<!--A jumbotron indicates a big box for calling extra attention to some special content or information. http://www.w3schools.com/bootstrap/bootstrap_jumbotron_header.asp-->
			<div class="jumbotron">
			  <h1>Dev Tools</h1>
			</div>
			
			<div class="row">
				<!-- 
				Bootstrap's grid system allows up to 12 columns across the page. http://www.w3schools.com/bootstrap/bootstrap_grid_basic.asp
				We can give different percentage of spllits to divs in different devices
				http://www.w3schools.com/bootstrap/bootstrap_grid_large.asp
				-->
				<div class="col-sm-4 col-md-4">
					<p><button type="button" @click="setCurrentLink('Base64')" class="btn btn-info">Base64 Encode/Decode</button></p>
					<p>Base64 encode or decode UTF-8 data.
					</br>
				</div>
				
				<div class="col-sm-4 col-md-4">
					<p><button type="button" @click="setCurrentLink('UrlEncode')" class="btn btn-info">URL Encode/Decode</button></p>
					<p>Encode or Decode URL's with UTF-8 characters</p>
					</br>
				</div>
				
				<div class="col-sm-4 col-md-4">
					<p>
					<button type="button" @click="setCurrentLink('ESQuery')" class="btn btn-info">Convert SQL query to ElasticSearch Query</button>
					<p>Generate MIB File by specifying metrics and alerts.</p>
					</p>
				</div>
			</div>
		</div>	
		<div v-if="currentLink == 'Base64'" id="base64">
			<div class="row">
				<div>
					<div class="row">
						<div class="col-xs-12">
               				<label style="white-space:normal !important;">Text to be encoded/decoded</label></td>
						</div>
					</div>
					<div class="row">
						<div class="col-md-8 col-sm-12">
							<textarea id="base64_data" v-model="data" class="form-control" rows="5" v-on:input="clearResponse"></textarea>
						</div>
					</div>
					
        			<div class="row">             
            			<div class="checkbox col-sm-offset-0 col-sm-2 col-xs-offset-0 col-xs-4">
            				<label><input id="isUrlSafe" type="checkbox">URL Safe</label>
            			 </div>
        			</div>			
        					
					</br>
			        <div class="row">
            			<div class="col-sm-1 col-xs-2" >
                 			<button id="base64_encode"  @click="encodeBase64" class="btn btn-primary" type="button">Encode</button>
            			</div>
            			<div class="col-sm-1 col-sm-offset-0  col-xs-offset-1 col-xs-2" >
             				<button id="base64_decode" @click="decodeBase64"  class="btn btn-primary" type="button">Decode</button>
            			</div>
        			</div> 
					
				</div>
			</div>
		</div>

		<div v-if="currentLink == 'UrlEncode'" id="urlencode">
			<div class="row">
				<div>
					<div class="row">
						<div class="col-xs-12">
               				<label style="white-space:normal !important;">Text to be encoded/decoded</label></td>
						</div>
					</div>
					<div class="row">
						<div class="col-md-8 col-sm-12">
							<textarea id="urlencode_data" v-model="data" class="form-control" rows="5" v-on:input="clearResponse"></textarea>
						</div>
					</div>
					</br>
			        <div class="row">
            			<div class="col-sm-1 col-xs-2" >
                 			<button id="urlencode_encode" @click="encodeUrl" class="btn btn-primary" type="button">Encode</button>
            			</div>
            			<div class="col-sm-1 col-sm-offset-0  col-xs-offset-1 col-xs-2" >
             				<button id="urlencode_decode" @click="decodeUrl" class="btn btn-primary" type="button">Decode</button>
            			</div>
        			</div> 
					
				</div>
			</div>
		</div>

		<div v-if="currentLink == 'ESQuery'" id="esquery">
			<div class="row">
				<div>
					<div class="row">
						<div class="col-xs-12">
               				<label style="white-space:normal !important;">Enter the SQL query</label></td>
						</div>
					</div>
					<div class="row">
						<div class="col-md-8 col-sm-12">
							<textarea id="esquery_data" v-model="data" class="form-control" rows="5" v-on:input="clearResponse"></textarea>
						</div>
					</div>
					</br>
			        <div class="row">
            			<div class="col-sm-1 col-xs-2" >
                 			<button id="esquery_convert"  @click="getESQuery" class="btn btn-primary" type="button">Convert</button>
            			</div>
        			</div> 
					
				</div>
			</div>
			</br>

		</div>
		
		</br>
		</br>
		
		<div class="row">
				<div  id="response" v-html="getResponse()" class="col-md-8 col-sm-12" v-show="response.length > 0" v-bind:class="getMessageClass()" style="word-wrap: break-word">
					
				</div>
		</div>
	</div>
	</form>
</div>	
<!-- 
<h1>Result</h1>
</br>
<div v-html="response"></div>
-->					

<!-- Hashing, Unicode lookup, Epoch convert.-->
<script src="https://unpkg.com/vue@2.0.3/dist/vue.js"></script>
<script src="../scripts/DevTools.js"></script>
<script>
	var devTools = new DevTools();
	var app = new Vue({
	
		el: '#app',
		data: {
			currentLink: 'About',
			data: '',
			response: '',
			isUrlSafe: false,
			responseAlert: ''
		},
		methods: {
			setCurrentLink: function(currentLink){
				this.currentLink = currentLink;
				this.data = '';
				this.response = '';
			},
			isCurrentLink: function(currentLink){
				return this.currentLink === currentLink;
			},
			getESQuery: function(){
				
				console.log('Getting ES Query');
				var promise = devTools.getESQuery(this.data);
				promise.then(this.consumeESQueryResponse, this.consumeErrorResponse);
			},
			consumeESQueryResponse: function(value){
				document.getElementById("esquery_data").focus();
				this.response = value.response;
				this.responseAlert = 'Success';
			},
			encodeBase64: function(){
				var promise = devTools.encodeBase64(this.isUrlSafe, this.data);
				promise.then(this.consumeBase64Response, this.consumeErrorResponse);
			},
			decodeBase64: function(){
				var promise = devTools.decodeBase64(this.isUrlSafe, this.data);
				promise.then(this.consumeBase64Response, this.consumeErrorResponse);			   					
			},
			consumeBase64Response: function(value) {
				document.getElementById("base64_data").focus();
				this.response = value.response;
				this.responseAlert = 'Success';
			},
			encodeUrl: function(){
				var promise = devTools.encodeUrl(this.data);
				promise.then(this.consumeUrlResponse, this.consumeErrorResponse);
			},
			decodeUrl: function(){
				var promise = devTools.decodeUrl(this.data);
				promise.then(this.consumeUrlResponse, this.consumeErrorResponse);			   					
			},	
			consumeUrlResponse: function(value) {
				document.getElementById("urlencode_data").focus();
				this.response = value.response;
				this.responseAlert = 'Success';
			},					
			consumeErrorResponse: function(error) {
				console.log('Error:' + error.response);
				this.responseAlert = 'Error';
				this.response = error.response.replace(/(?:\r\n|\r|\n)/g, '<br/>');
			},
			getMessageClass: function() {
				console.log("getMessageClass Called");
		        if (this.responseAlert == 'Error') {
                    return ['alert', 'alert-danger'];
                } else if (this.responseAlert == 'Success') {
                    return ['alert', 'alert-success'];
                } else {
                    return ['alert', 'alert-info'];
                }
			},
			clearResponse: function() {
				this.response = '';
			},
			getResponse: function() {
				return '<h1>Result</h1>' + '</br>' + this.response;
			}
		}
	});
</script>

</body>
</html>
